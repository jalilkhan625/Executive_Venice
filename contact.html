<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Contact US</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet"/>

  <!-- Custom Style -->
  <style>
    .h-captcha {
      margin-bottom: 1rem;
      min-height: 78px;
      width: 100%;
      overflow: hidden;
    }
    .error {
      color: #dc3545;
      font-size: 0.875em;
      display: none;
      margin-top: 0.25rem;
    }
    .success-badge {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1055;
      background-color: #198754;
      color: #fff;
      padding: 1rem 1.5rem;
      border-radius: 0.5rem;
      display: none;
      box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.2);
      font-weight: 500;
      text-align: center;
    }
    .form-container {
      background: #fff;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
      margin-left: auto;
      margin-right: auto;
      overflow: hidden;
    }
    .map-container {
      position: relative;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      margin-bottom: 2rem;
    }
    /* Enhanced Text Field Styles */
    .form-control {
      border: 1px solid #ced4da;
      border-radius: 6px;
      padding: 0.75rem 1rem;
      transition: all 0.3s ease;
      background-color: #f8f9fa;
    }
    .form-control:hover {
      border-color: #adb5bd;
      background-color: #fff;
    }
    .form-control:focus {
      border-color: #000;
      box-shadow: 0 0 0 0.2rem rgba(0, 0, 0, 0.1);
      background-color: #fff;
      outline: none;
    }
    .form-label {
      font-weight: 500;
      color: #333;
      margin-bottom: 0.5rem;
    }
    textarea.form-control {
      resize: vertical;
      min-height: 100px;
    }
    /* Responsive adjustments */
    /* Bigger screens (≥992px) */
    @media (min-width: 992px) {
      .form-container {
        max-width: 700px;
      }
      .contact-form-container {
        margin-top: 120px; /* Larger gap for desktops and larger screens */
      }
    }
    /* Tablets (≥768px and <992px) */
    @media (min-width: 768px) and (max-width: 991.98px) {
      .map-container, .form-container {
        width: 100%;
        max-width: 500px;
        margin-left: auto;
        margin-right: auto;
      }
      .contact-form-container {
        margin-top: 90px; /* Moderate gap for tablets */
      }
      .map-container iframe {
        height: 300px;
      }
      .h-captcha {
        transform: scale(0.9);
        transform-origin: left top;
      }
    }
    /* Small screens (≥576px and <768px) */
    @media (min-width: 576px) and (max-width: 767.98px) {
      .map-container, .form-container {
        width: 100%;
        max-width: 500px;
        margin-left: auto;
        margin-right: auto;
      }
      .contact-form-container {
        margin-top: 80px; /* Reduced gap for small tablets/large phones */
      }
      .map-container iframe {
        height: 300px;
      }
      .h-captcha {
        transform: scale(0.9);
        transform-origin: left top;
      }
    }
    /* Extra small screens (<576px) */
    @media (max-width: 575.98px) {
      .map-container iframe {
        height: 250px;
      }
      .form-container {
        padding: 1.5rem;
      }
      .contact-form-container {
        margin-top: 70px; /* Smallest gap for mobile phones */
      }
      .h-captcha {
        transform: scale(0.77);
        transform-origin: left top;
      }
      .form-control {
        padding: 0.65rem 0.85rem;
      }
    }
            /* Cookie Consent Panel */
        #cookie-consent {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #333;
            color: #fff;
            padding: 15px 20px;
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
            display: none; /* Hidden by default, shown via JS */
            font-family: 'DM Sans', sans-serif;
        }

        #cookie-consent p {
            margin: 0 0 10px 0;
            font-size: 0.9rem;
        }

        #cookie-consent .buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        #cookie-consent button {
            padding: 8px 20px;
            border: none;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #cookie-consent #accept-cookies {
            background-color: #007bff;
            color: #fff;
        }

        #cookie-consent #decline-cookies {
            background-color: #fff;
            color: #333;
        }

        #cookie-consent button:hover {
            opacity: 0.9;
        }

        @media (max-width: 576px) {
            #cookie-consent {
                padding: 10px;
            }
            #cookie-consent p {
                font-size: 0.8rem;
            }
            #cookie-consent .buttons {
                flex-direction: column;
                gap: 5px;
            }
            #cookie-consent button {
                width: 100%;
            }
        }
  </style>
</head>
<body>
  <div id="navbar-placeholder" class="bg-light py-3"></div>

  <!-- Contact Form -->
  <div class="container contact-form-container">
    <div class="form-container">
      <h1 class="mb-4">Write to us</h1>
      <div class="success-badge" id="successBadge">
        <i class="bi bi-check-circle me-2"></i>
        <span>Form submitted successfully!</span>
      </div>
      <form id="contactForm" novalidate>
        <div class="row g-3">
          <div class="col-12 col-md-6">
            <label for="name" class="form-label">Your name</label>
            <input type="text" class="form-control" id="name" required />
            <div class="error" id="nameError">Please enter your name.</div>
          </div>
          <div class="col-12 col-md-6">
            <label for="email" class="form-label">Your email</label>
            <input type="email" class="form-control" id="email" required />
            <div class="error" id="emailError">Please enter a valid email address.</div>
          </div>
        </div>
        <div class="mb-3 mt-3">
          <label for="subject" class="form-label">Subject</label>
          <input type="text" class="form-control" id="subject" required />
          <div class="error" id="subjectError">Please enter a subject.</div>
        </div>
        <div class="mb-3">
          <label for="message" class="form-label">Your message</label>
          <textarea class="form-control" id="message" rows="4" required></textarea>
          <div class="error" id="messageError">Please enter your message.</div>
        </div>
        <div class="h-captcha"
             data-sitekey="8f06e986-42cc-4d3a-a2c2-cf2474d84f38"
             data-callback="onHumanVerified"
             data-error-callback="onCaptchaError">
        </div>
        <button type="submit" class="btn btn-primary" style="background-color: black; font-size: 1.1rem; padding: 0.75rem 1.5rem; border: none; outline: none; box-shadow: none;">Submit</button>
      </form>
    </div>
  </div>

  <!-- Map of Central Venice with Pin -->
  <div class="container">
    <div class="map-container">
      <iframe 
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2796.836874974113!2d12.336456376020306!3d45.43405413782296!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x477eb1dbfb55dbd83%3A0x941be1b4e3c857c!2sPiazza%20San%20Marco%2C%203014%20Venezia%20VE%2C%20Italy!5e0!3m2!1sen!2sit!4v1711555785465!5m2!1sen!2sit" 
        width="100%" 
        height="450" 
        style="border:0;" 
        allowfullscreen="" 
        loading="lazy" 
        referrerpolicy="no-referrer-when-downgrade">
      </iframe>
    </div>
  </div>


  <div id="footer-placeholder"></div>

  <!-- Cookie Consent Panel -->
    <div id="cookie-consent-placeholder"></div>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
 <script src="scripts/script.js"></script>
  <script>
    emailjs.init("TidmjuBms6DYMAYoR");
  </script>
  <script>
    $(document).ready(function () {
      $('#successBadge').hide();
      $('#name, #email, #subject, #message').on('input', function () {
        $(`#${this.id}Error`).hide();
      });
      $('#contactForm').submit(function (e) {
        e.preventDefault();
        $('.error').hide();
        let isValid = true;
        const name = $('#name').val().trim();
        const email = $('#email').val().trim();
        const subject = $('#subject').val().trim();
        const message = $('#message').val().trim();
        const captchaResponse = hcaptcha.getResponse();
        if (!name) { $('#nameError').show(); isValid = false; }
        if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { $('#emailError').show(); isValid = false; }
        if (!subject) { $('#subjectError').show(); isValid = false; }
        if (!message) { $('#messageError').show(); isValid = false; }
        if (!captchaResponse) {
          alert("Please complete the captcha.");
          isValid = false;
        }
        if (isValid) {
          const now = new Date().toLocaleString();
          const formData = {
            name: name,
            time: now,
            email_from: email,
            message: `Subject: ${subject}\n\n${message}`
          };
          emailjs.send("service_ohh1v7p", "template_5piwwzq", formData)
            .then(function (response) {
              console.log("✅ Email sent to you:", response);
              emailjs.send("service_ohh1v7p", "template_adbx83q", {
                name: name,
                email_from: email,
                subject: subject,
                message: message
              })
              .then(function (clientResponse) {
                console.log("✅ Auto-reply sent to client:", clientResponse);
              })
              .catch(function (clientError) {
                console.error("❌ Auto-reply error:", clientError);
              });
              $('#contactForm')[0].reset();
              hcaptcha.reset();
              $('#successBadge').fadeIn();
              setTimeout(() => {
                $('#successBadge').fadeOut();
              }, 3000);
            })
            .catch(function (error) {
              console.error("❌ EmailJS error (main send):", error);
              alert("There was an error sending your message. Please try again later.");
            });
        }
      });
    });
    function onCaptchaError(error) {
      console.error("Captcha verification failed:", error);
      alert("Captcha verification failed. Please try again.");
    }
    
    


  </script>
</body>
</html>